import{f as w,n as C,k as T,p as $,l as _,o as s,c as o,a as l,t as b,F as m,r as p,m as q,b as B,g as D,q as v}from"./UU1K1ejp.js";import{_ as E}from"./CFJbxO7F.js";import{a as N}from"./Dzf5vI7H.js";import{u as S,q as A}from"./1YxpdsJ6.js";const F={class:"border-amber-50 flex flex-col items-center"},M={class:"w-full max-w-2xl p-4"},V={class:"text-lg font-semibold text-gray-700 mb-4"},j={class:"flex flex-wrap gap-2"},J={class:"w-full max-w-2xl mt-4 mb-4"},L={class:"flex flex-col gap-6"},H=w({__name:"index",async setup(R){var f;let n,u;const d=C(),{data:r}=([n,u]=T(()=>S(d.path,()=>A("contents").select("id","tags","title","date","description","path","body").order("date","DESC").all(),"$JYkuWj37ZN")),n=await n,u(),n),g=(f=r.value)==null?void 0:f.flatMap(e=>e.tags).reduce((e,i)=>e.set(i,(e.get(i)||0)+1),new Map),a=$(d.query.q||null),c=_(()=>a.value?(r.value||[]).filter(e=>e.tags.includes(a.value)):r.value||[]),x=_(()=>a.value?`#${a.value} - There are a total of ${c.value.length} posts`:`There are a total of ${c.value.length} posts`),h=e=>{a.value=a.value===e?null:e,v(`/tags?q=${e}`)},k=e=>{a.value=e,v(`/tags?q=${e}`)};return(e,i)=>(s(),o("div",F,[l("div",M,[l("p",V,b(x.value),1),l("div",j,[(s(!0),o(m,null,p(q(g),([t,y])=>(s(),o("div",{key:t,class:"m-1"},[B(N,{tag:t,count:y,"selected-tag":a.value,onClick:W=>h(t)},null,8,["tag","count","selected-tag","onClick"])]))),128))])]),l("div",J,[l("div",L,[(s(!0),o(m,null,p(c.value,t=>(s(),D(E,{key:t.id,post:{id:t.id,date:t.date,title:t.title,tags:t.tags,description:t.description,path:t.path,content:t,needEvent:!0},class:"w-full",onTagClicked:k},null,8,["post"]))),128))])])]))}});export{H as default};
