const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Br1XoMUM.js","./UU1K1ejp.js"])))=>i.map(i=>d[i]);
import{N as T,O as g,p as S,P,Q as O,R as B,S as I,y as R,U as E,V as L,m as x,s as M,W as U,X as H,Y as W,E as q}from"./UU1K1ejp.js";const F=n=>n==="defer"||n===!1;function te(...n){var v;const r=typeof n[n.length-1]=="string"?n.pop():void 0;typeof n[0]!="string"&&n.unshift(r);let[t,a,s={}]=n;if(typeof t!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof a!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");const e=T(),i=a,c=()=>g.value,f=()=>e.isHydrating?e.payload.data[t]:e.static.data[t];s.server=s.server??!0,s.default=s.default??c,s.getCachedData=s.getCachedData??f,s.lazy=s.lazy??!1,s.immediate=s.immediate??!0,s.deep=s.deep??g.deep,s.dedupe=s.dedupe??"cancel";const y=s.getCachedData(t,e),_=y!=null;if(!e._asyncData[t]||!s.immediate){(v=e.payload._errors)[t]??(v[t]=g.errorValue);const u=s.deep?S:P;e._asyncData[t]={data:u(_?y:s.default()),pending:S(!_),error:O(e.payload._errors,t),status:S("idle"),_default:s.default}}const o={...e._asyncData[t]};delete o._default,o.refresh=o.execute=(u={})=>{if(e._asyncDataPromises[t]){if(F(u.dedupe??s.dedupe))return e._asyncDataPromises[t];e._asyncDataPromises[t].cancelled=!0}if(u._initial||e.isHydrating&&u._initial!==!1){const h=u._initial?y:s.getCachedData(t,e);if(h!=null)return Promise.resolve(h)}o.pending.value=!0,o.status.value="pending";const p=new Promise((h,l)=>{try{h(i(e))}catch(w){l(w)}}).then(async h=>{if(p.cancelled)return e._asyncDataPromises[t];let l=h;s.transform&&(l=await s.transform(h)),s.pick&&(l=A(l,s.pick)),e.payload.data[t]=l,o.data.value=l,o.error.value=g.errorValue,o.status.value="success"}).catch(h=>{if(p.cancelled)return e._asyncDataPromises[t];o.error.value=L(h),o.data.value=x(s.default()),o.status.value="error"}).finally(()=>{p.cancelled||(o.pending.value=!1,delete e._asyncDataPromises[t])});return e._asyncDataPromises[t]=p,e._asyncDataPromises[t]},o.clear=()=>V(e,t);const m=()=>o.refresh({_initial:!0}),D=s.server!==!1&&e.payload.serverRendered;{const u=M();if(u&&D&&s.immediate&&!u.sp&&(u.sp=[]),u&&!u._nuxtOnBeforeMountCbs){u._nuxtOnBeforeMountCbs=[];const l=u._nuxtOnBeforeMountCbs;B(()=>{l.forEach(w=>{w()}),l.splice(0,l.length)}),I(()=>l.splice(0,l.length))}D&&e.isHydrating&&(o.error.value||y!=null)?(o.pending.value=!1,o.status.value=o.error.value?"error":"success"):u&&(e.payload.serverRendered&&e.isHydrating||s.lazy)&&s.immediate?u._nuxtOnBeforeMountCbs.push(m):s.immediate&&m();const p=U();if(s.watch){const l=R(s.watch,()=>o.refresh());p&&E(l)}const h=e.hook("app:data:refresh",async l=>{(!l||l.includes(t))&&await o.refresh()});p&&E(h)}const d=Promise.resolve(e._asyncDataPromises[t]).then(()=>o);return Object.assign(d,o),d}function V(n,r){r in n.payload.data&&(n.payload.data[r]=void 0),r in n.payload._errors&&(n.payload._errors[r]=g.errorValue),n._asyncData[r]&&(n._asyncData[r].data.value=void 0,n._asyncData[r].error.value=g.errorValue,n._asyncData[r].pending.value=!1,n._asyncData[r].status.value="idle"),r in n._asyncDataPromises&&(n._asyncDataPromises[r]&&(n._asyncDataPromises[r].cancelled=!0),n._asyncDataPromises[r]=void 0)}function A(n,r){const t={};for(const a of r)t[a]=n[a];return t}function Q(n){return{type:"root",children:n.value.map(j)}}function j(n){if(typeof n=="string")return{type:"text",value:n};const[r,t,...a]=n;return{type:"element",tag:r,props:t,children:a.map(j)}}const ne={contents:"MqLYc18re6",sitemap:"yQrBvTTttv",robots:"jeXDHFY19f"},Y={contents:"_content_contents",sitemap:"_content_sitemap",robots:"_content_robots",info:"_content_info"},se={contents:{fields:{id:"string",stem:"string",extension:"string",meta:"json",path:"string",title:"string",description:"string",seo:"json",body:"json",navigation:"json",tags:"json",date:"string"}},sitemap:{fields:{id:"string",stem:"string",extension:"string",meta:"json",path:"string",title:"string",description:"string",seo:"json",body:"json",navigation:"json",sitemap:"json"}},robots:{fields:{id:"string",stem:"string",extension:"string",meta:"json",path:"string",title:"string",description:"string",seo:"json",body:"json",navigation:"json",robots:"json"}},info:{fields:{}}},$=(n,r)=>{const t=n._conditions;return t.length>0?`(${t.join(` ${r} `)})`:""},b=n=>{const r=[],t={_conditions:r,where(a,s,e){let i;switch(s.toUpperCase()){case"IN":case"NOT IN":if(Array.isArray(e)){const c=e.map(f=>`'${f}'`).join(", ");i=`"${String(a)}" ${s.toUpperCase()} (${c})`}else throw new TypeError(`Value for ${s} must be an array`);break;case"BETWEEN":case"NOT BETWEEN":if(Array.isArray(e)&&e.length===2)i=`"${String(a)}" ${s.toUpperCase()} '${e[0]}' AND '${e[1]}'`;else throw new Error(`Value for ${s} must be an array with two elements`);break;case"IS NULL":case"IS NOT NULL":i=`"${String(a)}" ${s.toUpperCase()}`;break;case"LIKE":case"NOT LIKE":i=`"${String(a)}" ${s.toUpperCase()} '${e}'`;break;default:i=`"${String(a)}" ${s} '${e}'`}return r.push(`${i}`),t},andWhere(a){const s=a(b());return r.push($(s,"AND")),t},orWhere(a){const s=a(b());return r.push($(s,"OR")),t}};return t},K=(n,r)=>{const t={conditions:[],selectedFields:[],offset:0,limit:0,orderBy:[],count:{field:"",distinct:!1}},a={__params:t,andWhere(e){const i=e(b());return t.conditions.push($(i,"AND")),a},orWhere(e){const i=e(b());return t.conditions.push($(i,"OR")),a},path(e){return a.where("path","=",H(e))},skip(e){return t.offset=e,a},where(e,i,c){return a.andWhere(f=>f.where(String(e),i,c)),a},limit(e){return t.limit=e,a},select(...e){return e.length&&t.selectedFields.push(...e),a},order(e,i){return t.orderBy.push(`"${String(e)}" ${i}`),a},async all(){return r(n,s()).then(e=>e||[])},async first(){return r(n,s({limit:1})).then(e=>e[0]||null)},async count(e="*",i=!1){return r(n,s({count:{field:String(e),distinct:i}})).then(c=>c[0].count)}};function s(e={}){let i="SELECT ";if(e!=null&&e.count)i+=`COUNT(${e.count.distinct?"DISTINCT":""} ${e.count.field}) as count`;else{const f=Array.from(new Set(t.selectedFields));i+=f.length>0?f.map(y=>`"${String(y)}"`).join(", "):"*"}i+=` FROM ${Y[String(n)]}`,t.conditions.length>0&&(i+=` WHERE ${t.conditions.join(" AND ")}`),t.orderBy.length>0?i+=` ORDER BY ${t.orderBy.join(", ")}`:i+=" ORDER BY stem ASC";const c=(e==null?void 0:e.limit)||t.limit;return c>0&&(t.offset>0?i+=` LIMIT ${c} OFFSET ${t.offset}`:i+=` LIMIT ${c}`),i}return a},N=/^h([1-6])$/,z=n=>N.test(n);async function G(n,r){const{ignoredTags:t=[]}={};return(await n.where("extension","=","md").select("path","body","description","title").all()).flatMap(s=>X(s,{ignoredTags:t}))}function X(n,{ignoredTags:r}){var f,y,_,o;const t=!n.body||((f=n.body)==null?void 0:f.type)==="root"?n.body:Q(n.body),a=n.path??"",s=[{id:a,title:n.title||"",titles:[],content:(n.description||"").trim(),level:1}];if(!(t!=null&&t.children))return s;let e=1,i=0;const c=[n.title??""];for(const m of t.children){const D=m.tag||"";if(z(D)){const d=Number(((y=D.match(N))==null?void 0:y[1])??0),v=C(m).trim();d===1?c.splice(0,c.length):d<i?c.splice(d-1,c.length-1):d===i&&c.pop(),s.push({id:`${a}#${(_=m.props)==null?void 0:_.id}`,title:v,titles:[...c],content:"",level:d}),c.push(v),i=d,e+=1}else{const d=C(m,r).trim();if(e===1&&((o=s[e-1])==null?void 0:o.content)===d)continue;s[e-1].content=`${s[e-1].content} ${d}`.trim()}}return s}function C(n,r=[]){var a;let t="";return n.type==="text"&&(t+=n.value||""),r.includes(n.tag??"")?"":((a=n.children)!=null&&a.length&&(t+=n.children.map(s=>C(s,r)).filter(Boolean).join("")),t)}const J=n=>{var t,a;const r=(a=(t=W())==null?void 0:t.ssrContext)==null?void 0:a.event;return K(n,(s,e)=>Z(r,s,e))};async function re(n,r){return G(J(n))}async function Z(n,r,t){return k(r,t)}async function k(n,r){return await q(()=>import("./Br1XoMUM.js"),__vite__mapDeps([0,1]),import.meta.url).then(a=>a.loadDatabaseAdapter(n)).then(a=>a.all(r))}export{re as a,se as b,ne as c,Q as d,J as q,Y as t,te as u};
