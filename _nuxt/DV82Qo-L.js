import{f as w,n as C,k as T,p as $,l as f,c as o,a as s,t as b,F as m,r as p,m as q,o as l,b as B,g as D,s as v}from"./a83qh99j.js";import{_ as E}from"./CvGH1-84.js";import{u as N,a as S,q as A}from"./D3i6G7TR.js";const F={class:"border-amber-50 flex flex-col items-center"},M={class:"w-full max-w-2xl p-4"},V={class:"text-lg font-semibold text-gray-700 mb-4"},j={class:"flex flex-wrap gap-2"},J={class:"w-full max-w-2xl mt-4 mb-4"},L={class:"flex flex-col gap-6"},G=w({__name:"index",async setup(R){var _;let n,i;const d=C(),{data:r}=([n,i]=T(()=>N(d.path,()=>A("contents").select("id","tags","title","date","description","path","body").order("date","DESC").all(),"$JYkuWj37ZN")),n=await n,i(),n),g=(_=r.value)==null?void 0:_.flatMap(e=>e.tags).reduce((e,u)=>e.set(u,(e.get(u)||0)+1),new Map),a=$(d.query.q||null),c=f(()=>a.value?(r.value||[]).filter(e=>e.tags.includes(a.value)):r.value||[]),x=f(()=>a.value?`#${a.value} - There are a total of ${c.value.length} posts`:`There are a total of ${c.value.length} posts`),h=e=>{a.value=a.value===e?null:e,v(`/tags?q=${e}`)},k=e=>{a.value=e,v(`/tags?q=${e}`)};return(e,u)=>(l(),o("div",F,[s("div",M,[s("p",V,b(x.value),1),s("div",j,[(l(!0),o(m,null,p(q(g),([t,y])=>(l(),o("div",{key:t,class:"m-1"},[B(S,{tag:t,count:y,"selected-tag":a.value,onClick:W=>h(t)},null,8,["tag","count","selected-tag","onClick"])]))),128))])]),s("div",J,[s("div",L,[(l(!0),o(m,null,p(c.value,t=>(l(),D(E,{key:t.id,post:{id:t.id,date:t.date,title:t.title,tags:t.tags,description:t.description,path:t.path,content:t,needEvent:!0},class:"w-full",onTagClicked:k},null,8,["post"]))),128))])])]))}});export{G as default};
